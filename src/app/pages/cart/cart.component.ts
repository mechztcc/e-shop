import { add, remove } from './ngrx';
import { Product } from './../../types';
import { Component, OnInit } from '@angular/core';
import { Observable, Subscription } from 'rxjs';
import { Store } from '@ngrx/store';




@Component({
  selector: 'app-cart',
  templateUrl: './cart.component.html',
  styleUrls: ['./cart.component.sass']
})
export class CartComponent implements OnInit {



  item1 =  {id: 1, name: 'Smartphone A31', price: 1.099, url: 'data:image/jpeg;base64,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'}

  count$: Observable<any>

  items: Product[] = []

  public sub: Subscription;

  constructor(private store: Store<{ count: Product }>) { 
    this.count$ = store.select('count')
  }

  ngOnInit(): void {
     this.sub = this.count$.subscribe((a) => {
        if(a.length != 0) {
          this.items.push(a);     

        }     
    });
  }

  ngOnDestroy(): void {
    this.sub.unsubscribe();
  }

  remove() {
    this.store.dispatch(remove({ payload: this.item1 }))
  }


}
